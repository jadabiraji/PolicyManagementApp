<div class="container mt-5">
  <h2 class="mb-4">Policies</h2>

  <div class="d-flex justify-content-between mb-3">
    <!-- Create Policy Button -->
    <a class="btn btn-primary" [routerLink]="['/policies/new']">
      <i class="bi bi-plus-circle me-2"></i>Create Policy
    </a>
    <!-- Logout Button -->
    <button class="btn btn-danger" (click)="logout()">
      <i class="bi bi-box-arrow-right me-2"></i>Logout
    </button>
  </div>

  <!-- Table -->
  <div class="table-responsive">
    <table class="table table-striped table-hover">
      <thead class="table-light">
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Effective Date</th>
          <th>Expiry Date</th>
          <th>Type</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let policy of policies; let i = index">
          <td>{{ (currentPage - 1) * pageSize + (i + 1) }}</td>
          <td>{{ policy.name }}</td>
          <td>{{ policy.effectiveDate | date: 'shortDate' }}</td>
          <td>{{ policy.expiryDate | date: 'shortDate' }}</td>
          <td>{{ policy.policyType?.name }}</td>
          <td>
            <a class="btn btn-sm btn-outline-primary me-2" [routerLink]="['/policies/edit', policy.id]">
              <i class="bi bi-pencil-square"></i> Edit
            </a>
            <button class="btn btn-sm btn-outline-danger" (click)="deletePolicy(policy.id)">
              <i class="bi bi-trash"></i> Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination Controls -->
  <div class="d-flex justify-content-between mt-3">
    <div class="pagination">
      <ul class="pagination">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <button class="page-link" (click)="onPageChange(currentPage - 1)">Previous</button>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <button class="page-link" (click)="onPageChange(currentPage + 1)">Next</button>
        </li>
      </ul>
    </div>
    <div>Page {{ currentPage }} of {{ totalPages }}</div>
  </div>
</div>
